# git-branch-check-diff-commits

ğŸš€ **æ™ºèƒ½ Git åˆ†æ”¯å¯¹æ¯”åˆ†æå·¥å…·** - æä¾›æ¸…æ™°çš„å¯è§†åŒ–è¾“å‡ºã€è‡ªåŠ¨åŒ–æµç¨‹æ£€æµ‹å’Œç²¾å‡†çš„ä»£ç å·®å¼‚åˆ†æã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¯ **æ™ºèƒ½ä»£ç çŠ¶æ€åˆ†æ** - ä¸€çœ¼çœ‹æ‡‚ä»£ç æ˜¯å¦ä¸€è‡´ï¼ˆé«˜äº®æ˜¾ç¤ºï¼‰
- ğŸŒŠ **è‡ªåŠ¨åŒ–æµç¨‹æ£€æµ‹** - è‡ªåŠ¨è¯†åˆ« `feature â†’ dev â†’ main` å‘å¸ƒæµç¨‹
- ğŸ“Š **çœŸå®å·®å¼‚è®¡ç®—** - æ’é™¤åˆå¹¶æäº¤ï¼Œåªå…³æ³¨å®é™…åŠŸèƒ½ä»£ç å·®å¼‚
- ğŸ”€ **åˆå¹¶å†å²è¿½æº¯** - æ˜¾ç¤ºå…·ä½“çš„åˆå¹¶é“¾è·¯å’Œæ“ä½œå†å²
- ğŸ¨ **ç²¾ç¾å¯è§†åŒ–è¾“å‡º** - å½©è‰²å›¾æ ‡å’Œæ¸…æ™°çš„å±‚çº§ç»“æ„
- ğŸ’¡ **æ™ºèƒ½æ“ä½œå»ºè®®** - åŸºäºåˆ†æç»“æœæä¾›ç²¾å‡†çš„ä¸‹ä¸€æ­¥æ“ä½œ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…¨å±€å®‰è£…
npm install -g git-branch-check-diff-commits
# æˆ–
bun add -g git-branch-check-diff-commits

# é¡¹ç›®å†…å®‰è£…
npm install -D git-branch-check-diff-commits
# æˆ–
bun add -d git-branch-check-diff-commits
```

### åŸºæœ¬ä½¿ç”¨

```bash
# å¯¹æ¯”å½“å‰åˆ†æ”¯ä¸ç›®æ ‡åˆ†æ”¯
gbd main
gbd develop  
gbd origin/feature/user-auth

# å®Œæ•´å‘½ä»¤
git-branch-check-diff-commits main

# é€‰é¡¹
gbd main --json        # JSONæ ¼å¼è¾“å‡º
gbd main --no-fetch    # è·³è¿‡è‡ªåŠ¨fetch
```

## ğŸ“‹ ä½¿ç”¨åœºæ™¯

### 1. **åŠŸèƒ½åˆ†æ”¯å¼€å‘å®Œæˆå**
```bash
# æ£€æŸ¥æ˜¯å¦å¯ä»¥åˆå¹¶åˆ°ä¸»åˆ†æ”¯
gbd main
```

### 2. **è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹å**
```bash
# æ£€æŸ¥å‘å¸ƒæµç¨‹æ˜¯å¦æˆåŠŸ
gbd feature/user-login
```

### 3. **ä»£ç åŒæ­¥æ£€æŸ¥**
```bash
# æ£€æŸ¥æœ¬åœ°åˆ†æ”¯æ˜¯å¦è½å
gbd origin/develop
```

## ğŸ¨ è¾“å‡ºç¤ºä¾‹

### åœºæ™¯1ï¼šè‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹å®Œæˆ
```
â•­â”€ ğŸ” Git åˆ†æ”¯æ™ºèƒ½å¯¹æ¯”åˆ†æ â”€â•®
â”œâ”€ ğŸ§¹ å·¥ä½œåŒºçŠ¶æ€
âœ… å·¥ä½œåŒºå¹²å‡€ï¼Œå¯ä»¥å®‰å…¨è¿›è¡Œåˆ†æ”¯æ“ä½œ

â”œâ”€ ğŸŒŠ è‡ªåŠ¨åŒ–æµç¨‹åˆ†æ
ğŸ”€ æ£€æµ‹åˆ°è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹
  â”‚ 1ï¸âƒ£ feature/user-login â†’ dev (f8299de)
  â”‚ 2ï¸âƒ£ dev â†’ main (d7fdf79)

â”œâ”€ ğŸŒ¿ åˆ†æ”¯ä¿¡æ¯
  â”‚ å½“å‰åˆ†æ”¯: main
  â”‚ æœ€æ–°æäº¤: d7fdf79 Merge branch 'dev' (2 minutes ago)
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â”‚ å¯¹æ¯”åˆ†æ”¯: feature/user-login
  â”‚ æœ€æ–°æäº¤: abc1234 feat: add user login (5 minutes ago)

â”œâ”€ ğŸ“Š ä»£ç çŠ¶æ€
 ğŸ¯ ä»£ç å·²ä¸€è‡´ - åˆ†æ”¯å·²åˆå¹¶ 
  â”‚ âœ¨ é€šè¿‡è‡ªåŠ¨åŒ–æµç¨‹åˆå¹¶

â”œâ”€ ğŸ¯ æ™ºèƒ½å»ºè®®
âœ… æ— éœ€æ“ä½œ - ä»£ç å·²åŒæ­¥
â„¹ï¸ å¯åˆ é™¤å·²åˆå¹¶çš„æœ¬åœ°åˆ†æ”¯
  â”‚ git branch -d feature/user-login
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

### åœºæ™¯2ï¼šä»£ç æœ‰çœŸå®å·®å¼‚
```
â•­â”€ ğŸ” Git åˆ†æ”¯æ™ºèƒ½å¯¹æ¯”åˆ†æ â”€â•®
â”œâ”€ ğŸ§¹ å·¥ä½œåŒºçŠ¶æ€
âœ… å·¥ä½œåŒºå¹²å‡€ï¼Œå¯ä»¥å®‰å…¨è¿›è¡Œåˆ†æ”¯æ“ä½œ

â”œâ”€ ğŸŒ¿ åˆ†æ”¯ä¿¡æ¯
  â”‚ å½“å‰åˆ†æ”¯: feature/awesome
  â”‚ æœ€æ–°æäº¤: abc1234 Add awesome feature (2 hours ago)
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â”‚ å¯¹æ¯”åˆ†æ”¯: main
  â”‚ æœ€æ–°æäº¤: def5678 Update docs (1 day ago)

â”œâ”€ ğŸ“Š ä»£ç çŠ¶æ€
 âš ï¸  æœ‰æ–°ä»£ç æœªåŒæ­¥ - å®é™…é¢†å…ˆ 3 ä¸ªæäº¤ 

â”œâ”€ ğŸ“„ å®é™…ä»£ç å·®å¼‚
  â”‚ é¢†å…ˆçš„åŠŸèƒ½æäº¤: 3
  â”‚ æœ‰æ–‡ä»¶å˜æ›´å·®å¼‚
  â”‚ å…±åŒåŸºç¡€: abc1234

â”œâ”€ ğŸ¯ æ™ºèƒ½å»ºè®®
â„¹ï¸ æ¨é€æ–°ä»£ç 
  â”‚ git push origin feature/awesome
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

### åœºæ™¯3ï¼šä»£ç å®Œå…¨ä¸€è‡´
```
â•­â”€ ğŸ” Git åˆ†æ”¯æ™ºèƒ½å¯¹æ¯”åˆ†æ â”€â•®
â”œâ”€ ğŸ§¹ å·¥ä½œåŒºçŠ¶æ€
âœ… å·¥ä½œåŒºå¹²å‡€ï¼Œå¯ä»¥å®‰å…¨è¿›è¡Œåˆ†æ”¯æ“ä½œ

â”œâ”€ ğŸŒ¿ åˆ†æ”¯ä¿¡æ¯
  â”‚ å½“å‰åˆ†æ”¯: main
  â”‚ æœ€æ–°æäº¤: d7fdf79 Latest updates (1 hour ago)
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â”‚ å¯¹æ¯”åˆ†æ”¯: develop
  â”‚ æœ€æ–°æäº¤: d7fdf79 Latest updates (1 hour ago)

â”œâ”€ ğŸ“Š ä»£ç çŠ¶æ€
 ğŸ¯ ä»£ç å®Œå…¨ä¸€è‡´ 

â”œâ”€ ğŸ¯ æ™ºèƒ½å»ºè®®
âœ… æ— éœ€æ“ä½œ - ä»£ç å·²åŒæ­¥
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

## ğŸ”§ é¡¹ç›®é›†æˆ

### package.json scripts
```json
{
  "scripts": {
    "check-main": "gbd main",
    "check-dev": "gbd develop", 
    "check-branch": "gbd",
    "sync-status": "gbd origin/main --json"
  }
}
```

### CI/CD é›†æˆ
```yaml
# GitHub Actions ç¤ºä¾‹
- name: æ£€æŸ¥åˆ†æ”¯çŠ¶æ€
  run: |
    npm install -g git-branch-check-diff-commits
    gbd main --json > branch-status.json
    
- name: åˆ†æç»“æœ
  run: |
    if gbd main --json | jq -r '.relationship.type' | grep -q "ahead"; then
      echo "åˆ†æ”¯é¢†å…ˆï¼Œå¯ä»¥åˆå¹¶"
    fi
```

## ğŸ“š API ä½¿ç”¨

```javascript
import { analyzeBranches } from "git-branch-check-diff-commits";

// åŸºæœ¬åˆ†æ
const result = await analyzeBranches("main");

// å¸¦é€‰é¡¹çš„åˆ†æ
const result = await analyzeBranches("develop", { 
  json: true,
  noFetch: false 
});

// è·å–åˆ†æç»“æœ
console.log(result.relationship.type);    // "merged" | "ahead" | "behind" | "synchronized" | "diverged"
console.log(result.realCodeDiff.realDiff); // true/false - æ˜¯å¦æœ‰çœŸå®ä»£ç å·®å¼‚
console.log(result.mergeHistory.hasAutomatedFlow); // æ˜¯å¦æ£€æµ‹åˆ°è‡ªåŠ¨åŒ–æµç¨‹
console.log(result.mergeHistory.flowChain); // åˆå¹¶é“¾è·¯è¯¦æƒ…
```

### è¿”å›æ•°æ®ç»“æ„
```typescript
interface AnalysisResult {
  currentBranch: string;
  targetBranch: string;
  relationship: {
    type: "synchronized" | "merged" | "ahead" | "behind" | "diverged";
    confidence: "high" | "medium" | "low";
  };
  realCodeDiff: {
    realDiff: boolean;
    behindCommits: number;
    aheadCommits: number;
    hasFileDiff: boolean;
    mergeBase: string;
  };
  mergeHistory: {
    hasAutomatedFlow: boolean;
    flowDescription: string | null;
    flowChain: Array<{
      step: number;
      from: string;
      to: string;
      hash: string;
      message: string;
    }>;
  };
  workingDirectory: {
    isClean: boolean;
    changedFiles: Array<{file: string, status: string}>;
  };
}
```

## ğŸ¯ æ™ºèƒ½åˆ†æåŠŸèƒ½

### ä»£ç çŠ¶æ€è¯†åˆ«
- **ğŸ¯ ä»£ç å®Œå…¨ä¸€è‡´** - åˆ†æ”¯æŒ‡å‘åŒä¸€æäº¤
- **ğŸ¯ ä»£ç å·²ä¸€è‡´ - åˆ†æ”¯å·²åˆå¹¶** - åŠŸèƒ½åˆ†æ”¯å·²å®Œå…¨åˆå¹¶  
- **ğŸ¯ ä»£ç ä¸€è‡´ - åªæœ‰åˆå¹¶æäº¤å·®å¼‚** - ä»£ç ç›¸åŒï¼Œå†å²ä¸åŒ
- **âš ï¸ æœ‰æ–°ä»£ç æœªåŒæ­¥** - å­˜åœ¨çœŸå®çš„åŠŸèƒ½å·®å¼‚
- **âš ï¸ ä»£ç è½å** - éœ€è¦åŒæ­¥åŠŸèƒ½æäº¤

### è‡ªåŠ¨åŒ–æµç¨‹æ£€æµ‹
- è‡ªåŠ¨è¯†åˆ« `feature â†’ dev â†’ main` å‘å¸ƒæµç¨‹
- æ˜¾ç¤ºå…·ä½“çš„åˆå¹¶é“¾è·¯å’Œæäº¤å“ˆå¸Œ
- åŒºåˆ†è‡ªåŠ¨åŒ–åˆå¹¶å’Œæ‰‹åŠ¨æ“ä½œ

### æ™ºèƒ½å»ºè®®ç³»ç»Ÿ
- åŸºäºçœŸå®ä»£ç å·®å¼‚æä¾›ç²¾å‡†å»ºè®®
- åŒºåˆ†"éœ€è¦æ¨é€"å’Œ"æ— éœ€æ“ä½œ"
- è‡ªåŠ¨è¯†åˆ«å¯åˆ é™¤çš„å·²åˆå¹¶åˆ†æ”¯

## ğŸ” å¸¸è§ä½¿ç”¨æ¨¡å¼

```bash
# å¼€å‘æµç¨‹æ£€æŸ¥
gbd main              # æ£€æŸ¥æ˜¯å¦å¯ä»¥åˆå¹¶åˆ°ä¸»åˆ†æ”¯
gbd develop           # æ£€æŸ¥å¼€å‘åˆ†æ”¯çŠ¶æ€

# å‘å¸ƒåéªŒè¯  
gbd feature/xxx       # éªŒè¯åŠŸèƒ½åˆ†æ”¯æ˜¯å¦å·²å®Œå…¨åˆå¹¶

# åŒæ­¥çŠ¶æ€æ£€æŸ¥
gbd origin/main       # æ£€æŸ¥è¿œç¨‹ä¸»åˆ†æ”¯çŠ¶æ€
gbd upstream/develop  # æ£€æŸ¥ä¸Šæ¸¸å¼€å‘åˆ†æ”¯

# æ‰¹é‡æ£€æŸ¥ï¼ˆç»“åˆå…¶ä»–å·¥å…·ï¼‰
git branch | grep feature | xargs -I {} gbd {}
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ License

MIT

---

**è®©åˆ†æ”¯å¯¹æ¯”å˜å¾—ç®€å•è€Œæ™ºèƒ½ï¼** ğŸš€